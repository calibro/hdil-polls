!function(){var a=window.hdil||(window.hdil={});a.violin=function(){function a(a){a.each(function(d){var e,f={top:10,right:10,bottom:20,left:20},g=c-f.left-f.right,h=b-f.top-f.bottom;if(e=a.select("svg").empty()?a.append("svg").attr("width",c).attr("height",b).append("g").attr("transform","translate("+f.left+","+f.top+")"):a.select("svg").attr("width",c).attr("height",b).select("g").attr("transform","translate("+f.left+","+f.top+")"),d.length){var i=d3.scaleBand().range([0,g]).domain(d.map(function(a){return a.key})).round(!0),j=i.bandwidth(),k=e.selectAll("g.g-violins").data(d,function(a){return a.key});k.enter().append("g").attr("class","g-violins").attr("transform",function(a){return"translate("+i(a.key)+",0)"}),k.attr("transform",function(a){return"translate("+i(a.key)+",0)"});var l=d3.scaleLinear().range([j/2,0]),m=d3.scaleLinear().range([h,0]),n=d3.area().x(function(a){return m(""===a.key?0:parseInt(a.key))}).y1(function(a){return l(a.value)}).curve(d3.curveBasis);n.y0(l(0));var o=d3.extent(d[0].values,function(a){return""===a.key?0:parseInt(a.key)}),p=d3.max(d,function(a){return a.maxY});l.domain([0,p]),m.domain(o);var q=e.selectAll(".pathR");q.empty()&&(q=e.selectAll(".g-violins").append("g").attr("class","pathR").attr("transform","translate("+j+",0)"));var r=q.selectAll("path").data(function(a){return[a]});r.enter().append("path").attr("fill","#00C5CA").attr("d",function(a){return n(a.values)}).attr("transform","rotate(90,0,0)"),r.transition().attr("d",function(a){return n(a.values)});var s=e.selectAll(".pathL");s.empty()&&(s=e.selectAll(".g-violins").append("g").attr("class","pathL"));var t=s.selectAll("path").data(function(a){return[a]});t.enter().append("path").attr("fill","#00C5CA").attr("d",function(a){return n(a.values)}).attr("transform","rotate(90,0,0) scale(1,-1)"),t.transition().attr("d",function(a){return n(a.values)});var u=e.select(".xAxis");u.empty()?e.append("g").attr("class","xAxis").attr("transform","translate(0,"+h+")").call(d3.axisBottom(i).tickSize(0).tickPadding(10)):u.call(d3.axisBottom(i).tickSize(0).tickPadding(10));var v=e.select(".yAxis");v.empty()?e.append("g").attr("class","yAxis").attr("transform","translate(0,0)").call(d3.axisLeft(m).tickSize(-g).ticks(7).tickSizeOuter(0).tickPadding(10)):v.call(d3.axisLeft(m).tickSize(-g).ticks(7).tickSizeOuter(0).tickPadding(10));var w=[.25,.5,.75],x=[],y=10;d.forEach(function(a){var b=[],c=[];a.values.forEach(function(a){""===a.key?d3.range(a.value).forEach(function(){c.push(0)}):d3.range(a.value).forEach(function(){c.push(parseInt(a.key))})}),w.forEach(function(a){b.push(d3.quantile(c,a))}),x.push({key:a.key,values:b,mean:d3.mean(c)})});var z=e.selectAll("g.g-boxplot").data(x,function(a){return a.key});z.enter().append("g").attr("class","g-boxplot").attr("transform",function(a){return"translate("+i(a.key)+",0)"}).each(function(a){var b="Q3: "+a.values[2]+"<br/>mean: "+d3.format(".2f")(a.mean)+"<br/>median: "+a.values[1]+"<br/>Q1: "+a.values[0]+"<br/>";$(this).tooltip({html:!0,container:"body",title:b,placement:"right"})}),z.attr("transform",function(a){return"translate("+i(a.key)+",0)"}).each(function(a){var b="Q3: "+a.values[2]+"<br/>mean: "+d3.format(".2f")(a.mean)+"<br/>median: "+a.values[1]+"<br/>Q1: "+a.values[0]+"<br/>";$(this).attr("data-original-title",b).tooltip("fixTitle")});var A=e.selectAll("g.g-boxplot").selectAll("rect").data(function(a){return[[a.values[0],a.values[1]],[a.values[1],a.values[2]]]});A.enter().append("rect").attr("fill","#ccc").attr("stroke","#555").attr("width",y).attr("height",function(a){return Math.abs(m(d3.max(a))-m(d3.min(a)))}).attr("y",function(a){return m(d3.max(a))}).attr("x",j/2-y/2),A.transition().attr("height",function(a){return Math.abs(m(d3.max(a))-m(d3.min(a)))}).attr("y",function(a){return m(d3.max(a))}).attr("x",j/2-y/2);var B=e.selectAll("g.g-boxplot").selectAll("circle").data(function(a){return[a.mean]});B.enter().append("circle").attr("fill","white").attr("stroke","#555").attr("r",y/4).attr("cy",function(a){return m(a)}).attr("cx",j/2),B.transition().attr("cy",function(a){return m(a)})}})}var b=600,c=600,d=d3.dispatch("brushEnd"),e=1e3;return a.height=function(c){return arguments.length?(b=c,a):b},a.width=function(b){return arguments.length?(c=b,a):c},a.duration=function(b){return arguments.length?(e=b,a):e},a.on=function(){var b=d.on.apply(d,arguments);return b===d?a:b},a}}(),function(){var a=window.hdil||(window.hdil={});a.matrix=function(){function a(a){a.each(function(e){var f,g={top:10,right:10,bottom:20,left:20},h=d-g.left-g.right,i=c-g.top-g.bottom;if(f=a.select("svg").empty()?a.append("svg").attr("width",d).attr("height",c).append("g").attr("transform","translate("+g.left+","+g.top+")"):a.select("svg").attr("width",d).attr("height",c).select("g").attr("transform","translate("+g.left+","+g.top+")"),e.length){var j=d3.scalePoint().range([0,h]).domain(b).padding(1).round(!0),k=d3.scalePoint().range([i,0]).domain(b).padding(1).round(!0),l=j.step()>k.step()?k.step()/2:j.step()/2,m=d3.scaleSqrt().domain([1,d3.max(e,function(a){return a.value})]).range([1,l]),n=f.select("g.circles");n.empty()&&(n=f.append("g").attr("class","circles"));var o=n.selectAll("circle").data(e,function(a){return a.x+"_"+a.y});o.exit().transition().attr("r",0).remove(),o.enter().append("circle").attr("cx",function(a){return j(a.x)}).attr("cy",function(a){return k(a.y)}).attr("fill","#00C5CA").attr("class","matrix-circles").attr("r",0).transition().attr("r",function(a){return m(a.value)}).each(function(a){$(this).tooltip({container:"body",title:a.value})}),o.merge(o).transition().attr("r",function(a){return m(a.value)}).each(function(a){$(this).attr("data-original-title",a.value).tooltip("fixTitle")});var p=f.select(".xAxis");p.empty()?f.append("g").attr("class","xAxis").attr("transform","translate(0,"+i+")").call(d3.axisBottom(j).tickSize(-i).tickPadding(10).tickSizeOuter(0)):p.call(d3.axisBottom(j).tickSize(-i).tickPadding(10).tickSizeOuter(0));var q=f.select(".yAxis");q.empty()?f.append("g").attr("class","yAxis").attr("transform","translate(0,0)").call(d3.axisLeft(k).tickSize(-h).tickSizeOuter(0).tickPadding(10)):q.call(d3.axisLeft(k).tickSize(-h).tickSizeOuter(0).tickPadding(10))}})}var b,c=600,d=600,e=d3.dispatch("brushEnd"),f=1e3;return a.height=function(b){return arguments.length?(c=b,a):c},a.width=function(b){return arguments.length?(d=b,a):d},a.duration=function(b){return arguments.length?(f=b,a):f},a.scale=function(c){return arguments.length?(b=c,a):b},a.on=function(){var b=e.on.apply(e,arguments);return b===e?a:b},a}}();